!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("regexp-events"),require("p2")):"function"==typeof define&&define.amd?define(["regexp-events","p2"],e):"object"==typeof exports?exports.lazerGameCore=e(require("regexp-events"),require("p2")):t.lazerGameCore=e(t.RegExpEvents,t.p2)}(window,function(t,e){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=144)}([function(t,e,r){var n=r(48),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();t.exports=i},function(t,e,r){var n=r(123),o=r(117);t.exports=function(t,e){var r=o(t,e);return n(r)?r:void 0}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(e,r){e.exports=t},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,r){t.exports=e},function(t,e,r){var n=r(84),o=r(25),i=r(83),a=r(82),s=r(81),u=r(12),c=r(47),f=c(n),l=c(o),p=c(i),h=c(a),y=c(s),d=u;(n&&"[object DataView]"!=d(new n(new ArrayBuffer(1)))||o&&"[object Map]"!=d(new o)||i&&"[object Promise]"!=d(i.resolve())||a&&"[object Set]"!=d(new a)||s&&"[object WeakMap]"!=d(new s))&&(d=function(t){var e=u(t),r="[object Object]"==e?t.constructor:void 0,n=r?c(r):"";if(n)switch(n){case f:return"[object DataView]";case l:return"[object Map]";case p:return"[object Promise]";case h:return"[object Set]";case y:return"[object WeakMap]"}return e}),t.exports=d},function(t,e){var r=Array.isArray;t.exports=r},function(t,e,r){var n=r(45),o=r(44);t.exports=function(t,e,r,i){var a=!r;r||(r={});for(var s=-1,u=e.length;++s<u;){var c=e[s],f=i?i(r[c],t[c],c,r,t):void 0;void 0===f&&(f=t[c]),a?o(r,c,f):n(r,c,f)}return r}},function(t,e,r){var n=r(108);t.exports=function(t,e){var r=t.__data__;return n(e)?r["string"==typeof e?"string":"hash"]:r.map}},function(t,e,r){var n=r(1)(Object,"create");t.exports=n},function(t,e,r){var n=r(0).Symbol;t.exports=n},function(t,e,r){var n=r(11),o=r(121),i=r(120),a="[object Null]",s="[object Undefined]",u=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?s:a:u&&u in Object(t)?o(t):i(t)}},function(t,e,r){var n=r(26);t.exports=function(t,e){for(var r=t.length;r--;)if(n(t[r][0],e))return r;return-1}},function(t,e,r){var n=r(133),o=r(132),i=r(131),a=r(130),s=r(129);function u(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,r){"use strict";var n,o,i,a=r(141),s="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function u(){i=!1}function c(t){if(t){if(t!==n){if(t.length!==s.length)throw new Error("Custom alphabet for shortid must be "+s.length+" unique characters. You submitted "+t.length+" characters: "+t);var e=t.split("").filter(function(t,e,r){return e!==r.lastIndexOf(t)});if(e.length)throw new Error("Custom alphabet for shortid must be "+s.length+" unique characters. These characters were not unique: "+e.join(", "));n=t,u()}}else n!==s&&(n=s,u())}function f(){return i||(i=function(){n||c(s);for(var t,e=n.split(""),r=[],o=a.nextValue();e.length>0;)o=a.nextValue(),t=Math.floor(o*e.length),r.push(e.splice(t,1)[0]);return r.join("")}())}t.exports={characters:function(t){return c(t),n},seed:function(t){a.seed(t),o!==t&&(u(),o=t)},lookup:function(t){return f()[t]},shuffled:f}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={PLAYER:Math.pow(2,0),WALLS:Math.pow(2,1),BULLET:Math.pow(2,2)};n.ALL=Object.keys(n).map(function(t){return n[t]}).reduce(function(t,e){return t|e}),e.COLLISION_GROUPS=n},function(t,e,r){var n=r(31);t.exports=function(t){var e=new t.constructor(t.byteLength);return new n(e).set(new n(t)),e}},function(t,e,r){var n=r(87),o=r(37),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),n(a(t),function(e){return i.call(t,e)}))}:o;t.exports=s},function(t,e){var r=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}},function(t,e,r){(function(t){var n=r(48),o="object"==typeof e&&e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o&&n.process,s=function(){try{return a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s}).call(this,r(22)(t))},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){(function(t){var n=r(0),o=r(98),i="object"==typeof e&&e&&!e.nodeType&&e,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===i?n.Buffer:void 0,u=(s?s.isBuffer:void 0)||o;t.exports=u}).call(this,r(22)(t))},function(t,e,r){var n=r(43),o=r(95),i=r(39);t.exports=function(t){return i(t)?n(t):o(t)}},function(t,e,r){var n=r(1)(r(0),"Map");t.exports=n},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NAMES=e.NAME_TEMPLATES=void 0;var n=i(r(135));e.createName=function(){return a[Math.floor(Math.random()*a.length)].replace("{{name}}",s[Math.floor(Math.random()*s.length)])},e.lerp=u,e.parseSearch=c,e.getURLSearchSettings=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.href;t.cache||(t.cache={});if(!t.cache[e]){var r=c(e),o=(0,n.default)(f);!1===r.shadows&&(o.shadows=!1),o.debug=!!r.debug,t.cache[e]=o}return t.cache[e]},e.buildCollisions=function(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];if(n.visible)if(Array.isArray(n.polygon)){var i=new o.default.Body({mass:0});i.position[0]=n.x,i.position[1]=n.y,i.fromPolygon(n.polygon.map(function(t){return[t.x,t.y]})),e.push(i)}else if(Array.isArray(n.polyline)){var a=new o.default.Body({mass:0});a.position[0]=n.x,a.position[1]=n.y;for(var s=1;s<n.polyline.length;s++){var c=n.polyline[s-1],f=n.polyline[s],l=Math.sqrt(Math.pow(f.x-c.x,2)+Math.pow(f.y-c.y,2)),p=Math.atan2(f.y-c.y,f.x-c.x);a.addShape(new o.default.Line({position:[u(c.x,f.x,.5),u(c.y,f.y,.5)],length:l,angle:p}))}e.push(a)}else if(n.height>0&&n.width>0){var h=new o.default.Body({mass:0});h.position[0]=n.x+n.width/2,h.position[1]=n.y+n.height/2,h.addShape(new o.default.Box({width:n.width,height:n.height})),e.push(h)}}return e},e.clipDecimals=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return Math.round(t*Math.pow(10,e))/Math.pow(10,e)};var o=i(r(5));function i(t){return t&&t.__esModule?t:{default:t}}var a=e.NAME_TEMPLATES=["nice {{name}}","awesome {{name}}","{{name}} the cool","{{name}} the short","{{name}} the tall","{{name}} the fat","{{name}} the thin","{{name}} the scared","insane {{name}}","{{name}} the kid","really fat {{name}}","{{name}} the smart","{{name}} the brave","the amazing {{name}}","{{name}} the bald"],s=e.NAMES=["James","John","Robert","Michael","William","David","Richard","Charles","Joseph","Thomas","Christopher","Daniel","Paul","Mark","Donald","George","Kenneth","Steven","Edward","Brian","Ronald","Anthony","Kevin","Jason","Matthew","Gary","Timothy","Jose","Larry","Jeffrey","Frank","Scott","Eric","Stephen","Andrew","Raymond","Gregory","Joshua","Jerry","Dennis","Walter","Patrick","Peter","Harold","Douglas","Henry","Carl","Arthur","Ryan","Roger","Joe","Juan","Jack","Albert","Jonathan","Justin","Terry","Gerald","Keith","Samuel","Willie","Ralph","Lawrence","Nicholas","Roy","Benjamin","Bruce","Brandon","Adam","Harry","Fred","Wayne","Billy","Steve","Louis","Jeremy","Aaron","Randy","Howard","Eugene","Carlos","Russell","Bobby","Victor","Martin","Ernest","Phillip","Todd","Jesse","Craig","Alan","Shawn","Clarence","Sean","Philip","Chris","Johnny","Earl","Jimmy","Antonio"];function u(t,e,r){return t*(1-r)+e*r}function c(t){if(t=t||window&&window.location.href,c.cache=c.cache||{},!c.cache[t]){var e=(-1!==t.indexOf("?")?t.substr(t.indexOf("?")+1,t.length+1):"").replace(/^\?/,"").replace(/\+/g," ").split("&");c.cache[t]={};for(var r=0;r<e.length;r++){var n=e[r].split("=");if(""!==n[0]){var o=n[1];o=isNaN(o)?"true"===o||void 0===o||"on"===o||"false"!==o&&"off"!==o&&window.unescape(o):parseFloat(o),c.cache[t][n[0]]=o}}}return c.cache[t]}var f={color:void 0,name:void 0,shadows:!0,debug:!1}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(3),a=r(51),s=(n=a)&&n.__esModule?n:{default:n};var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.game=t,r.bullets=[],r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.Emitter),o(e,[{key:"createBullet",value:function(t,r,n){var o=e.BulletTypes[t];if(o){var i=new o(this,r,n);return this.bullets.push(i),this.emit("bullet-created",i),i}}},{key:"createFromJSON",value:function(t){var r=e.BulletTypes[t.type];if(r){var n=new r(this,t.info,t.props);return n.fromJSON(t),this.bullets.push(n),this.emit("bullet-created",n),n}}},{key:"getBullet",value:function(t){return t instanceof s.default?this.bullets.includes(t)?t:void 0:this.bullets.find(function(e){return e.id==t})}},{key:"removeBullet",value:function(t){var e=this.getBullet(t);return this.bullets.includes(e)&&(this.bullets.splice(this.bullets.indexOf(e),1),this.emit("bullet-removed",e)),this}},{key:"clearBullets",value:function(){var t=this;return this.bullets.forEach(function(e){return t.removeBullet(e)}),this.bullets=[],this}},{key:"update",value:function(t){this.bullets.forEach(function(e){return e.update(t)})}},{key:"toJSON",value:function(){var t=this.bullets.map(function(t){return t.toJSON()});return this.emit("to-json",t),t}},{key:"fromJSON",value:function(t){var e=this;return this.clearBullets(),t.forEach(function(t){e.createBullet(t.type).fromJSON(t.data)}),this.emit("from-json",t),this}},{key:"getBulletType",value:function(t){for(var r in e.BulletTypes)if(t instanceof e.BulletTypes[r])return r}}]),e}();e.default=u,u.BulletTypes={default:s.default.DefaultBullet},u.BULLET_TYPE={DEFAULT:"default"}},function(t,e,r){var n=r(65),o=r(62),i=r(61),a=1,s=2;t.exports=function(t,e,r,u,c,f){var l=r&a,p=t.length,h=e.length;if(p!=h&&!(l&&h>p))return!1;var y=f.get(t);if(y&&f.get(e))return y==e;var d=-1,v=!0,b=r&s?new n:void 0;for(f.set(t,e),f.set(e,t);++d<p;){var g=t[d],m=e[d];if(u)var _=l?u(m,g,d,e,t,f):u(g,m,d,t,e,f);if(void 0!==_){if(_)continue;v=!1;break}if(b){if(!o(e,function(t,e){if(!i(b,e)&&(g===t||c(g,t,r,u,f)))return b.push(e)})){v=!1;break}}else if(g!==m&&!c(g,m,r,u,f)){v=!1;break}}return f.delete(t),f.delete(e),v}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(r(68)),o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(3),a=c(r(5)),s=r(27),u=r(16);function c(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.game=t,r.size={width:0,height:0},r.bodies=[],r.spawnAreas=[],r.loadedJSON={},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.Emitter),o(e,[{key:"clearBodies",value:function(){var t=this;return this.bodies.forEach(function(e){return t.game.world.removeBody(e)}),this.bodies=[],this.emit("collisions-cleared"),this}},{key:"toJSON",value:function(){return this.loadedJSON}},{key:"fromJSON",value:function(t){var r=this;return this.clearBodies(),this.loadedJSON=t,this.size.width=t.size.width,this.size.height=t.size.height,this.bodies=e.buildCollisions(t.collisions),this.bodies.forEach(function(t){t.shapes.forEach(function(t){t.collisionGroup=u.COLLISION_GROUPS.WALLS,t.collisionMask=u.COLLISION_GROUPS.ALL})}),this.bodies.forEach(function(t){return r.game.world.addBody(t)}),this.emit("from-json",t),this}},{key:"getSpawnPoint",value:function(){return{x:this.size.width/2*50,y:this.size.height/2*50}}}],[{key:"buildCollisions",value:function(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];if(n.visible)if(Array.isArray(n.polygon)){var o=new a.default.Body({mass:0});o.position[0]=n.x,o.position[1]=n.y,o.fromPolygon(n.polygon.map(function(t){return[t.x,t.y]})),e.push(o)}else if(Array.isArray(n.polyline)){var i=new a.default.Body({mass:0});i.position[0]=n.x,i.position[1]=n.y;for(var u=1;u<n.polyline.length;u++){var c=n.polyline[u-1],f=n.polyline[u],l=Math.sqrt(Math.pow(f.x-c.x,2)+Math.pow(f.y-c.y,2)),p=Math.atan2(f.y-c.y,f.x-c.x);i.addShape(new a.default.Line({position:[(0,s.lerp)(c.x,f.x,.5),(0,s.lerp)(c.y,f.y,.5)],length:l,angle:p}))}e.push(i)}else if(n.height>0&&n.width>0){var h=new a.default.Body({mass:0});h.position[0]=n.x+n.width/2,h.position[1]=n.y+n.height/2,h.addShape(new a.default.Box({width:n.width,height:n.height})),e.push(h)}}return e}},{key:"parseTiledJSON",value:function(t){var e={size:{width:t.width,height:t.height},types:[],tiles:[]};e.collisions=t.layers.find(function(t){return t.objects&&"collision"==t.name&&"objectgroup"==t.type}).objects;var r={};return t.tilesets.forEach(function(t){for(var e in t.tileproperties){var n=parseInt(e)+t.firstgid;Reflect.ownKeys(t.tileproperties[e]).length>0&&(r[n]||(r[n]={}),Object.assign(r[n],t.tileproperties[e]))}}),t.layers.filter(function(t){return"tilelayer"===t.type}).forEach(function(n){for(var o=0;o<n.data.length;o++){var i=Math.floor(o/t.width),a=o-i*t.width;e.tiles[i]||(e.tiles[i]=[]),e.tiles[i][a]||(e.tiles[i][a]=[]);var s=r[n.data[o]];s&&e.tiles[i][a].push(s)}}),e.tiles=e.tiles.map(function(t){return t.map(function(t){var r=e.types.find(function(e){return(0,n.default)(t,e)});return!r&&t.length>0&&e.types.push(r=t),e.types.indexOf(r)})}),e}}]),e}();e.default=f},function(t,e,r){var n=r(0).Uint8Array;t.exports=n},function(t,e,r){var n=r(35),o=r(7);t.exports=function(t,e,r){var i=e(t);return o(t)?i:n(i,r(t))}},function(t,e,r){var n=r(32),o=r(18),i=r(24);t.exports=function(t){return n(t,i,o)}},function(t,e,r){var n=r(40)(Object.getPrototypeOf,Object);t.exports=n},function(t,e){t.exports=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}},function(t,e,r){var n=r(35),o=r(34),i=r(18),a=r(37),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)n(e,i(t)),t=o(t);return e}:a;t.exports=s},function(t,e){t.exports=function(){return[]}},function(t,e,r){var n=r(43),o=r(92),i=r(39);t.exports=function(t){return i(t)?n(t,!0):o(t)}},function(t,e,r){var n=r(49),o=r(41);t.exports=function(t){return null!=t&&o(t.length)&&!n(t)}},function(t,e){t.exports=function(t,e){return function(r){return t(e(r))}}},function(t,e){var r=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}},function(t,e,r){var n=r(96),o=r(21),i=r(20),a=i&&i.isTypedArray,s=a?o(a):n;t.exports=s},function(t,e,r){var n=r(101),o=r(100),i=r(7),a=r(23),s=r(97),u=r(42),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var r=i(t),f=!r&&o(t),l=!r&&!f&&a(t),p=!r&&!f&&!l&&u(t),h=r||f||l||p,y=h?n(t.length,String):[],d=y.length;for(var v in t)!e&&!c.call(t,v)||h&&("length"==v||l&&("offset"==v||"parent"==v)||p&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,d))||y.push(v);return y}},function(t,e,r){var n=r(103);t.exports=function(t,e,r){"__proto__"==e&&n?n(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}},function(t,e,r){var n=r(44),o=r(26),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,r){var a=t[e];i.call(t,e)&&o(a,r)&&(void 0!==r||e in t)||n(t,e,r)}},function(t,e,r){var n=r(116),o=r(109),i=r(107),a=r(106),s=r(105);function u(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e){var r=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,r){(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(this,r(122))},function(t,e,r){var n=r(12),o=r(4),i="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",u="[object Proxy]";t.exports=function(t){if(!o(t))return!1;var e=n(t);return e==a||e==s||e==i||e==u}},function(t,e,r){var n=r(14),o=r(128),i=r(127),a=r(126),s=r(125),u=r(124);function c(t){var e=this.__data__=new n(t);this.size=e.size}c.prototype.clear=o,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=s,c.prototype.set=u,t.exports=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultBullet=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=c(r(53)),i=r(3),a=c(r(5)),s=r(27),u=r(16);function c(t){return t&&t.__esModule?t:{default:t}}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};f(this,e);var i=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.manager=t,i.id=(0,o.default)(),i.info=Object.assign({owner:void 0},r),i.props=Object.assign({},n),i.data={},i.init(),i}return p(e,i.Emitter),n(e,[{key:"init",value:function(){}},{key:"setProp",value:function(t,e){if(t instanceof Object){for(var r in t)this.props[r]=t[r];this.emit("props-changed",this.props)}else this.props[t]=e,this.emit("props-changed",this.props);return this}},{key:"getProp",value:function(t){return this.props[t]}},{key:"update",value:function(t){}},{key:"destroy",value:function(){return this.manager.removeBullet(this),this}},{key:"die",value:function(){return this.destroy()}},{key:"toJSON",value:function(){var t={id:this.id,info:this.info,props:this.props,type:this.type};return this.emit("to-json",t),t}},{key:"fromJSON",value:function(t){return this.id=t.id||this.id,t.info&&Object.assign(this.info,t.info),t.props&&Object.assign(this.props,t.props),this.init(),this}},{key:"emit",value:function(t){for(var e,r,n,o=arguments.length,a=Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];var u=(e=i.Emitter.prototype.emit).call.apply(e,[this,t].concat(a));return(r=this.manager).emit.apply(r,["bullet-"+t,this].concat(a)),(n=this.manager).emit.apply(n,["bullet-"+this.id+"-"+t,this].concat(a)),u}},{key:"game",get:function(){return this.manager.game}},{key:"player",get:function(){return this.game.players.getPlayer(this.info.owner)}},{key:"type",get:function(){return this.manager.getBulletType(this)}}]),e}();e.default=h;e.DefaultBullet=function(t){function e(){return f(this,e),l(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return p(e,h),n(e,[{key:"init",value:function(){(function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this),this.data.speed=500,this.data.pathPosition=0,this.data.position={x:0,y:0},this.data.path=e.calcPath(this.game.world,{start:[this.props.start.x,this.props.start.y],direction:this.props.direction}),this.data.pathLength=this.data.path.length?this.data.path[this.data.path.length-1][2]:0}},{key:"update",value:function(t){this.data.pathPosition+=this.data.speed*t,this.data.position=e.pointOnPath(this.data.path,this.data.pathPosition),this.data.direction=e.directionOnPath(this.data.path,this.data.pathPosition),this.data.pathPosition>this.data.pathLength&&this.game.isMaster&&this.die()}}],[{key:"calcPath",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return[];e=Object.assign({},{maxDistance:1e3,maxBounces:5,start:[0,0],direction:0},e);var r=[],n=0,o=this.calcPath.ray=this.calcPath.ray||new a.default.Ray({mode:a.default.Ray.CLOSEST,collisionGroup:u.COLLISION_GROUPS.BULLET,collisionMask:u.COLLISION_GROUPS.WALLS}),i=this.calcPath.result=this.calcPath.result||new a.default.RaycastResult,s=this.calcPath.hitPoint=this.calcPath.hitPoint||a.default.vec2.create();o.from[0]=e.start[0],o.from[1]=e.start[1],o.direction[0]=Math.cos(e.direction),o.direction[1]=Math.sin(e.direction),o.to[0]=o.from[0]+o.direction[0]*(e.maxDistance-n),o.to[1]=o.from[1]+o.direction[1]*(e.maxDistance-n),o.update(),r=[[e.start[0],e.start[1],0]];for(var c=0;n<e.maxDistance&&c<e.maxBounces;)if(t.raycast(i,o))c++,i.getHitPoint(s,o),r.push([s[0],s[1],n+=i.getHitDistance(o)]),a.default.vec2.copy(o.from,s),a.default.vec2.reflect(o.direction,o.direction,i.normal),o.from[0]+=.001*o.direction[0],o.from[1]+=.001*o.direction[1],o.to[0]=o.from[0]+o.direction[0]*(e.maxDistance-n),o.to[1]=o.from[1]+o.direction[1]*(e.maxDistance-n),o.update(),i.reset();else{var f=e.maxDistance-n;r.push([o.to[0],o.to[1],n+=f])}return r}},{key:"pointOnPath",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r={},n=void 0,o=t.find(function(t){return t[2]>e}),i=t.length-1;i>=0;i--)if(t[i][2]<=e){n=t[i];break}if(o){var a=(e-n[2])/(o[2]-n[2]);r.x=(0,s.lerp)(n[0],o[0],a),r.y=(0,s.lerp)(n[1],o[1],a)}else r.x=n[0],r.y=n[1];return r}},{key:"directionOnPath",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=void 0,n=t.find(function(t){return t[2]>e}),o=t.length-1;o>=0;o--)if(t[o][2]<=e){r=t[o];break}return n?Math.atan2(n[0]-r[0],n[1]-r[1]):0}}]),e}()},function(t,e,r){"use strict";var n=r(140);t.exports=function(t,e){for(var r,o=0,i="";!r;)i+=t(e>>4*o&15|n()),r=e<Math.pow(16,o+1),o++;return i}},function(t,e,r){"use strict";t.exports=r(142)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(3),i=f(r(5)),a=r(53),s=f(r(28)),u=r(27),c=r(16);function f(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.manager=t,o.id=(0,a.generate)(),o.info={name:void 0,color:0},o.props={health:100,spawned:!1},o.position={x:0,y:0,vx:0,vy:0,direction:0},o.controls={moveX:0,moveY:0,shoot:!1,direction:0},o.body=new i.default.Body({mass:10,damping:0,fixedRotation:!0}),o.body.addShape(new i.default.Circle({radius:10})),o.body.shapes.forEach(function(t){t.collisionGroup=c.COLLISION_GROUPS.PLAYER,t.collisionMask=c.COLLISION_GROUPS.WALLS|c.COLLISION_GROUPS.BULLET|c.COLLISION_GROUPS.PLAYER}),o.cooldown=.15,o.tmp=0,r&&o.setInfo(r),n&&o.setProp(n),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Emitter),n(e,[{key:"setProp",value:function(t,e){if(t instanceof Object){for(var r in t)this.props[r]=t[r];this.emit("props-changed",this.props)}else this.props[t]=e,this.emit("props-changed",this.props);return this}},{key:"setInfo",value:function(t,e){if(t instanceof Object){for(var r in t)this.info[r]=t[r];this.emit("info-changed",this.info)}else this.info[t]=e,this.emit("info-changed",this.info);return this}},{key:"setControl",value:function(t,e){if(t instanceof Object){for(var r in t)this.controls[r]=t[r];this.emit("controls-changed",this.controls)}else this.controls[t]=e,this.emit("controls-changed",this.controls);return this}},{key:"getProp",value:function(t,e){return this.props[t]}},{key:"getInfo",value:function(t,e){return this.info[t]}},{key:"getControl",value:function(t,e){return this.controls[t]}},{key:"setPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.body.position[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.body.position[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments[4];this.body.position[0]=t,this.body.position[1]=e,this.body.velocity[0]=r,this.body.velocity[1]=n,this.position.direction=o,this._updatePosition()}},{key:"update",value:function(t){var e=this.game.config.player.movement,r=e.speed,n=e.excelerate,o=e.decelerate;0!==this.controls.moveX?this.body.velocity[0]=(0,u.lerp)(this.body.velocity[0],r*Math.sign(this.controls.moveX),n):this.body.velocity[0]*=o,0!==this.controls.moveY?this.body.velocity[1]=(0,u.lerp)(this.body.velocity[1],r*Math.sign(this.controls.moveY),n):this.body.velocity[1]*=o,this.tmp+=t,this.controls.shoot&&this.game.isMaster&&this.tmp>this.cooldown&&(this.tmp=0,this.game.bullets.createBullet(s.default.BULLET_TYPE.DEFAULT,{owner:this.id},{start:{x:this.position.x,y:this.position.y},direction:this.controls.direction+(Math.random()-.5)*(Math.PI/32)})),this._updatePosition(),this.emit("update",t)}},{key:"_updatePosition",value:function(){this.position.x=(0,u.clipDecimals)(this.body.position[0]),this.position.y=(0,u.clipDecimals)(this.body.position[1]),this.position.vx=(0,u.clipDecimals)(this.body.velocity[0]),this.position.vy=(0,u.clipDecimals)(this.body.velocity[1])}},{key:"toJSON",value:function(){var t={id:this.id,info:this.info,props:this.props,position:this.position,controls:this.controls};return this.emit("to-json",t),t}},{key:"fromJSON",value:function(t){return this.id=t.id,this.setInfo(t.info),this.setProp(t.props),this.setControl(t.controls),Object.assign(this.position,t.position),this.emit("from-json",t),this}},{key:"emit",value:function(t){for(var e,r,n,i=arguments.length,a=Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];var u=(e=o.Emitter.prototype.emit).call.apply(e,[this,t].concat(a));return(r=this.manager).emit.apply(r,["player-"+t,this].concat(a)),(n=this.manager).emit.apply(n,["player-"+this.id+"-"+t,this].concat(a)),u}},{key:"game",get:function(){return this.manager.game}}]),e}();e.default=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(3),a=r(54),s=(n=a)&&n.__esModule?n:{default:n};var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.game=t,r.players=[],r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.Emitter),o(e,[{key:"getPlayer",value:function(t){return t instanceof s.default?this.players.includes(t)?t:void 0:this.players.find(function(e){return e.id===t})}},{key:"createPlayer",value:function(t,e){var r=new s.default(this,t,e);return this.players.push(r),this.game.world.addBody(r.body),this.emit("player-created",r),r}},{key:"createFromJSON",value:function(t){var e=new s.default(this,t.info,t.props);return e.fromJSON(t),this.players.push(e),this.game.world.addBody(e.body),this.emit("player-created",e),e}},{key:"removePlayer",value:function(t){var e=this.getPlayer(t);return this.players.includes(e)&&(this.players.splice(this.players.indexOf(e),1),this.game.world.removeBody(e.body),this.emit("player-removed",e)),this}},{key:"clearPlayers",value:function(){var t=Array.from(this.players);return this.players.forEach(this.removePlayer.bind(this)),this.emit("players-cleared",t),this}},{key:"update",value:function(t){this.players.forEach(function(e){return e.update(t)})}},{key:"toJSON",value:function(){var t=this.players.map(function(t){return t.toJSON()});return this.emit("to-json",t),t}},{key:"fromJSON",value:function(t){var e=this;return this.clearPlayers(),t.forEach(function(t){e.createPlayer().fromJSON(t)}),this.emit("from-json",t),this}}]),e}();e.default=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={player:{movement:{speed:180,excelerate:.9,decelerate:.7},max:10}}},function(t,e,r){var n=r(33),o=1,i=Object.prototype.hasOwnProperty;t.exports=function(t,e,r,a,s,u){var c=r&o,f=n(t),l=f.length;if(l!=n(e).length&&!c)return!1;for(var p=l;p--;){var h=f[p];if(!(c?h in e:i.call(e,h)))return!1}var y=u.get(t);if(y&&u.get(e))return y==e;var d=!0;u.set(t,e),u.set(e,t);for(var v=c;++p<l;){var b=t[h=f[p]],g=e[h];if(a)var m=c?a(g,b,h,e,t,u):a(b,g,h,t,e,u);if(!(void 0===m?b===g||s(b,g,r,a,u):m)){d=!1;break}v||(v="constructor"==h)}if(d&&!v){var _=t.constructor,j=e.constructor;_!=j&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof j&&j instanceof j)&&(d=!1)}return u.delete(t),u.delete(e),d}},function(t,e){t.exports=function(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}},function(t,e){t.exports=function(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}},function(t,e,r){var n=r(11),o=r(31),i=r(26),a=r(29),s=r(59),u=r(58),c=1,f=2,l="[object Boolean]",p="[object Date]",h="[object Error]",y="[object Map]",d="[object Number]",v="[object RegExp]",b="[object Set]",g="[object String]",m="[object Symbol]",_="[object ArrayBuffer]",j="[object DataView]",x=n?n.prototype:void 0,w=x?x.valueOf:void 0;t.exports=function(t,e,r,n,x,O,P){switch(r){case j:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case _:return!(t.byteLength!=e.byteLength||!O(new o(t),new o(e)));case l:case p:case d:return i(+t,+e);case h:return t.name==e.name&&t.message==e.message;case v:case g:return t==e+"";case y:var S=s;case b:var k=n&c;if(S||(S=u),t.size!=e.size&&!k)return!1;var A=P.get(t);if(A)return A==e;n|=f,P.set(t,e);var M=a(S(t),S(e),n,x,O,P);return P.delete(t),M;case m:if(w)return w.call(t)==w.call(e)}return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e){t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){var r="__lodash_hash_undefined__";t.exports=function(t){return this.__data__.set(t,r),this}},function(t,e,r){var n=r(46),o=r(64),i=r(63);function a(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new n;++e<r;)this.add(t[e])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,t.exports=a},function(t,e,r){var n=r(50),o=r(29),i=r(60),a=r(57),s=r(6),u=r(7),c=r(23),f=r(42),l=1,p="[object Arguments]",h="[object Array]",y="[object Object]",d=Object.prototype.hasOwnProperty;t.exports=function(t,e,r,v,b,g){var m=u(t),_=u(e),j=m?h:s(t),x=_?h:s(e),w=(j=j==p?y:j)==y,O=(x=x==p?y:x)==y,P=j==x;if(P&&c(t)){if(!c(e))return!1;m=!0,w=!1}if(P&&!w)return g||(g=new n),m||f(t)?o(t,e,r,v,b,g):i(t,e,j,r,v,b,g);if(!(r&l)){var S=w&&d.call(t,"__wrapped__"),k=O&&d.call(e,"__wrapped__");if(S||k){var A=S?t.value():t,M=k?e.value():e;return g||(g=new n),b(A,M,r,v,g)}}return!!P&&(g||(g=new n),a(t,e,r,v,b,g))}},function(t,e,r){var n=r(66),o=r(2);t.exports=function t(e,r,i,a,s){return e===r||(null==e||null==r||!o(e)&&!o(r)?e!=e&&r!=r:n(e,r,i,a,t,s))}},function(t,e,r){var n=r(67);t.exports=function(t,e){return n(t,e)}},function(t,e,r){var n=r(6),o=r(2),i="[object Set]";t.exports=function(t){return o(t)&&n(t)==i}},function(t,e,r){var n=r(69),o=r(21),i=r(20),a=i&&i.isSet,s=a?o(a):n;t.exports=s},function(t,e,r){var n=r(6),o=r(2),i="[object Map]";t.exports=function(t){return o(t)&&n(t)==i}},function(t,e,r){var n=r(71),o=r(21),i=r(20),a=i&&i.isMap,s=a?o(a):n;t.exports=s},function(t,e,r){var n=r(4),o=Object.create,i=function(){function t(){}return function(e){if(!n(e))return{};if(o)return o(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();t.exports=i},function(t,e,r){var n=r(73),o=r(34),i=r(19);t.exports=function(t){return"function"!=typeof t.constructor||i(t)?{}:n(o(t))}},function(t,e,r){var n=r(17);t.exports=function(t,e){var r=e?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}},function(t,e,r){var n=r(11),o=n?n.prototype:void 0,i=o?o.valueOf:void 0;t.exports=function(t){return i?Object(i.call(t)):{}}},function(t,e){var r=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,r.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,r){var n=r(17);t.exports=function(t,e){var r=e?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}},function(t,e,r){var n=r(17),o=r(78),i=r(77),a=r(76),s=r(75),u="[object Boolean]",c="[object Date]",f="[object Map]",l="[object Number]",p="[object RegExp]",h="[object Set]",y="[object String]",d="[object Symbol]",v="[object ArrayBuffer]",b="[object DataView]",g="[object Float32Array]",m="[object Float64Array]",_="[object Int8Array]",j="[object Int16Array]",x="[object Int32Array]",w="[object Uint8Array]",O="[object Uint8ClampedArray]",P="[object Uint16Array]",S="[object Uint32Array]";t.exports=function(t,e,r){var k=t.constructor;switch(e){case v:return n(t);case u:case c:return new k(+t);case b:return o(t,r);case g:case m:case _:case j:case x:case w:case O:case P:case S:return s(t,r);case f:return new k;case l:case y:return new k(t);case p:return i(t);case h:return new k;case d:return a(t)}}},function(t,e){var r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&r.call(t,"index")&&(n.index=t.index,n.input=t.input),n}},function(t,e,r){var n=r(1)(r(0),"WeakMap");t.exports=n},function(t,e,r){var n=r(1)(r(0),"Set");t.exports=n},function(t,e,r){var n=r(1)(r(0),"Promise");t.exports=n},function(t,e,r){var n=r(1)(r(0),"DataView");t.exports=n},function(t,e,r){var n=r(32),o=r(36),i=r(38);t.exports=function(t){return n(t,i,o)}},function(t,e,r){var n=r(8),o=r(36);t.exports=function(t,e){return n(t,o(t),e)}},function(t,e){t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i}},function(t,e,r){var n=r(8),o=r(18);t.exports=function(t,e){return n(t,o(t),e)}},function(t,e){t.exports=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}},function(t,e,r){(function(t){var n=r(0),o="object"==typeof e&&e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o?n.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=s?s(r):new t.constructor(r);return t.copy(n),n}}).call(this,r(22)(t))},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}},function(t,e,r){var n=r(4),o=r(19),i=r(91),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return i(t);var e=o(t),r=[];for(var s in t)("constructor"!=s||!e&&a.call(t,s))&&r.push(s);return r}},function(t,e,r){var n=r(8),o=r(38);t.exports=function(t,e){return t&&n(e,o(e),t)}},function(t,e,r){var n=r(40)(Object.keys,Object);t.exports=n},function(t,e,r){var n=r(19),o=r(94),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return o(t);var e=[];for(var r in Object(t))i.call(t,r)&&"constructor"!=r&&e.push(r);return e}},function(t,e,r){var n=r(12),o=r(41),i=r(2),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&o(t.length)&&!!a[n(t)]}},function(t,e){var r=9007199254740991,n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var o=typeof t;return!!(e=null==e?r:e)&&("number"==o||"symbol"!=o&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e){t.exports=function(){return!1}},function(t,e,r){var n=r(12),o=r(2),i="[object Arguments]";t.exports=function(t){return o(t)&&n(t)==i}},function(t,e,r){var n=r(99),o=r(2),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,u=n(function(){return arguments}())?n:function(t){return o(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},function(t,e){t.exports=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}},function(t,e,r){var n=r(8),o=r(24);t.exports=function(t,e){return t&&n(e,o(e),t)}},function(t,e,r){var n=r(1),o=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e){t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}},function(t,e,r){var n=r(9);t.exports=function(t,e){var r=n(this,t),o=r.size;return r.set(t,e),this.size+=r.size==o?0:1,this}},function(t,e,r){var n=r(9);t.exports=function(t){return n(this,t).has(t)}},function(t,e,r){var n=r(9);t.exports=function(t){return n(this,t).get(t)}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,r){var n=r(9);t.exports=function(t){var e=n(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e,r){var n=r(10),o="__lodash_hash_undefined__";t.exports=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=n&&void 0===e?o:e,this}},function(t,e,r){var n=r(10),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return n?void 0!==e[t]:o.call(e,t)}},function(t,e,r){var n=r(10),o="__lodash_hash_undefined__",i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(n){var r=e[t];return r===o?void 0:r}return i.call(e,t)?e[t]:void 0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,r){var n=r(10);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(t,e,r){var n=r(114),o=r(113),i=r(112),a=r(111),s=r(110);function u(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,r){var n=r(115),o=r(14),i=r(25);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||o),string:new n}}},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,r){var n=r(0)["__core-js_shared__"];t.exports=n},function(t,e,r){var n,o=r(118),i=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(t){return!!i&&i in t}},function(t,e){var r=Object.prototype.toString;t.exports=function(t){return r.call(t)}},function(t,e,r){var n=r(11),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=n?n.toStringTag:void 0;t.exports=function(t){var e=i.call(t,s),r=t[s];try{t[s]=void 0;var n=!0}catch(t){}var o=a.call(t);return n&&(e?t[s]=r:delete t[s]),o}},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){var n=r(49),o=r(119),i=r(4),a=r(47),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,f=u.toString,l=c.hasOwnProperty,p=RegExp("^"+f.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||o(t))&&(n(t)?p:s).test(a(t))}},function(t,e,r){var n=r(14),o=r(25),i=r(46),a=200;t.exports=function(t,e){var r=this.__data__;if(r instanceof n){var s=r.__data__;if(!o||s.length<a-1)return s.push([t,e]),this.size=++r.size,this;r=this.__data__=new i(s)}return r.set(t,e),this.size=r.size,this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}},function(t,e,r){var n=r(14);t.exports=function(){this.__data__=new n,this.size=0}},function(t,e,r){var n=r(13);t.exports=function(t,e){var r=this.__data__,o=n(r,t);return o<0?(++this.size,r.push([t,e])):r[o][1]=e,this}},function(t,e,r){var n=r(13);t.exports=function(t){return n(this.__data__,t)>-1}},function(t,e,r){var n=r(13);t.exports=function(t){var e=this.__data__,r=n(e,t);return r<0?void 0:e[r][1]}},function(t,e,r){var n=r(13),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,r=n(e,t);return!(r<0||(r==e.length-1?e.pop():o.call(e,r,1),--this.size,0))}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,r){var n=r(50),o=r(104),i=r(45),a=r(102),s=r(93),u=r(90),c=r(89),f=r(88),l=r(86),p=r(33),h=r(85),y=r(6),d=r(80),v=r(79),b=r(74),g=r(7),m=r(23),_=r(72),j=r(4),x=r(70),w=r(24),O=1,P=2,S=4,k="[object Arguments]",A="[object Function]",M="[object GeneratorFunction]",E="[object Object]",B={};B[k]=B["[object Array]"]=B["[object ArrayBuffer]"]=B["[object DataView]"]=B["[object Boolean]"]=B["[object Date]"]=B["[object Float32Array]"]=B["[object Float64Array]"]=B["[object Int8Array]"]=B["[object Int16Array]"]=B["[object Int32Array]"]=B["[object Map]"]=B["[object Number]"]=B[E]=B["[object RegExp]"]=B["[object Set]"]=B["[object String]"]=B["[object Symbol]"]=B["[object Uint8Array]"]=B["[object Uint8ClampedArray]"]=B["[object Uint16Array]"]=B["[object Uint32Array]"]=!0,B["[object Error]"]=B[A]=B["[object WeakMap]"]=!1,t.exports=function t(e,r,L,N,T,J){var R,I=r&O,D=r&P,C=r&S;if(L&&(R=T?L(e,N,T,J):L(e)),void 0!==R)return R;if(!j(e))return e;var z=g(e);if(z){if(R=d(e),!I)return c(e,R)}else{var U=y(e),F=U==A||U==M;if(m(e))return u(e,I);if(U==E||U==k||F&&!T){if(R=D||F?{}:b(e),!I)return D?l(e,s(R,e)):f(e,a(R,e))}else{if(!B[U])return T?e:{};R=v(e,U,I)}}J||(J=new n);var G=J.get(e);if(G)return G;if(J.set(e,R),x(e))return e.forEach(function(n){R.add(t(n,r,L,n,e,J))}),R;if(_(e))return e.forEach(function(n,o){R.set(o,t(n,r,L,o,e,J))}),R;var V=C?D?h:p:D?keysIn:w,W=z?void 0:V(e);return o(W||e,function(n,o){W&&(n=e[o=n]),i(R,o,t(n,r,L,o,e,J))}),R}},function(t,e,r){var n=r(134),o=4;t.exports=function(t){return n(t,o)}},function(t,e,r){"use strict";t.exports=0},function(t,e,r){"use strict";var n=r(15);t.exports=function(t){if(!t||"string"!=typeof t||t.length<6)return!1;for(var e=n.characters(),r=t.length,o=0;o<r;o++)if(-1===e.indexOf(t[o]))return!1;return!0}},function(t,e,r){"use strict";var n,o,i=r(52),a=r(15),s=1459707606518,u=6;t.exports=function(t){var e="",r=Math.floor(.001*(Date.now()-s));return r===o?n++:(n=0,o=r),e+=i(a.lookup,u),e+=i(a.lookup,t),n>0&&(e+=i(a.lookup,n)),e+=i(a.lookup,r)}},function(t,e,r){"use strict";var n=r(15);t.exports=function(t){var e=n.shuffled();return{version:15&e.indexOf(t.substr(0,1)),worker:15&e.indexOf(t.substr(1,1))}}},function(t,e,r){"use strict";var n="object"==typeof window&&(window.crypto||window.msCrypto);t.exports=function(){if(!n||!n.getRandomValues)return 48&Math.floor(256*Math.random());var t=new Uint8Array(1);return n.getRandomValues(t),48&t[0]}},function(t,e,r){"use strict";var n=1;t.exports={nextValue:function(){return(n=(9301*n+49297)%233280)/233280},seed:function(t){n=t}}},function(t,e,r){"use strict";var n=r(15),o=(r(52),r(139)),i=r(138),a=r(137),s=r(136)||0;function u(){return i(s)}t.exports=u,t.exports.generate=u,t.exports.seed=function(e){return n.seed(e),t.exports},t.exports.worker=function(e){return s=e,t.exports},t.exports.characters=function(t){return void 0!==t&&n.characters(t),n.shuffled()},t.exports.decode=o,t.exports.isValid=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(3),i=f(r(55)),a=f(r(28)),s=f(r(5)),u=f(r(30)),c=f(r(56));function f(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.id=t,r.info={},r.isMaster=!1,r.config=JSON.parse(JSON.stringify(c.default)),r.players=new i.default(r),r.map=new u.default(r),r.bullets=new a.default(r),r.world=new s.default.World({gravity:[0,0]}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Emitter),n(e,[{key:"getPlayer",value:function(){var t;return(t=this.players).getPlayer.apply(t,arguments)}},{key:"createPlayer",value:function(){var t;return(t=this.players).createPlayer.apply(t,arguments)}},{key:"removePlayer",value:function(){var t;return(t=this.players).removePlayer.apply(t,arguments)}},{key:"spawnPlayer",value:function(t){var e=this.players.getPlayer(t),r=this.map.getSpawnPoint();return e.setPosition(r.x,r.y),e.setProp("spawned",!0),this}},{key:"setInfo",value:function(t,e){if(t instanceof Object){for(var r in t)this.info[r]=t[r];this.emit("info-changed",t)}else this.info[t]=e,this.emit("info-changed",t,e);return this}},{key:"getInfo",value:function(t,e){return this.info[t]}},{key:"getDelta",value:function(){var t=new Date,e=(t-this.lastDelta)/1e3;return this.lastDelta=t,e}},{key:"update",value:function(){var t=this.getDelta();this.world.step(1/60,t,1),this.players.update(t),this.bullets.update(t),this.emit("update",t)}},{key:"toJSON",value:function(){var t={id:this.id,info:this.info,config:this.config,map:this.map.toJSON(),players:this.players.toJSON()};return this.emit("to-json",t),t}},{key:"fromJSON",value:function(t){return this.id=t.id,this.setInfo(t.info),this.players.fromJSON(t.players),this.map.fromJSON(t.map),this.emit("from-json",t),this}},{key:"isClient",get:function(){return!this.isMaster}}]),e}();e.default=l,l.DEFAULT_FPS=1/60},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BulletManager=e.Bullet=e.Tilemap=e.PlayerManager=e.Player=e.Game=void 0;var n=c(r(143)),o=c(r(54)),i=c(r(55)),a=c(r(30)),s=c(r(51)),u=c(r(28));function c(t){return t&&t.__esModule?t:{default:t}}e.Game=n.default,e.Player=o.default,e.PlayerManager=i.default,e.Tilemap=a.default,e.Bullet=s.default,e.BulletManager=u.default}]).default});
//# sourceMappingURL=lazer-game-core.js.map